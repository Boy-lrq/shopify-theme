<!doctype html>
<html lang="{{ shop.locale }}">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title }}</title>
    <style>
      /* åŸºç¡€æ ·å¼ */
      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          margin: 0;
          min-height: 100vh;
          background: #f0f0f0;
      }

      /* å¼¹çª—èƒŒæ™¯ */
      .popup-background {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.3);
          backdrop-filter: blur(10px);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
      }

      /* å¼¹çª—ä¸»ä½“ */
      .popup-card {
          background: white;
          border-radius: 14px;
          padding: 2rem;
          max-width: 500px;
          width: 90%;
          position: relative;
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }

      /* å…³é—­æŒ‰é’® */
      .close-btn {
          position: absolute;
          top: 1rem;
          right: 1rem;
          background: none;
          border: none;
          cursor: pointer;
          color: #666;
          /* å¢å¤§å­—ä½“å¤§å° */
          font-size: 24px;
          /* è°ƒæ•´å†…è¾¹è·ä»¥å¢å¤§ç‚¹å‡»åŒºåŸŸ */
          padding: 5px;
      }

      /* å›¾ç‰‡åŒºåŸŸ */
      .coupon-image {
          position: relative;
          height: 200px;
          border-radius: 8px;
          overflow: hidden;
          margin-bottom: 1.5rem;
      }

      .coupon-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
      }

      .coupon-sprite {
          /* è®¾ç½®ç²¾çµå›¾ä¸ºèƒŒæ™¯å›¾åƒ */
          background-image: url('https://gw.alicdn.com/imgextra/i1/O1CN01Lz3PB11Hq72toc39W_!!6000000000808-1-tps-960-288.gif');
          /* è®¾ç½®èƒŒæ™¯å›¾åƒçš„å¤§å°ï¼Œç¡®ä¿æ•´ä¸ªç²¾çµå›¾éƒ½èƒ½æ˜¾ç¤º */
          background-size: cover;
          /* è®¾ç½®èƒŒæ™¯å›¾åƒçš„ä½ç½®ï¼Œè¿™é‡Œå‡è®¾ä½ è¦æ˜¾ç¤ºçš„éƒ¨åˆ†ä»å·¦ä¸Šè§’å¼€å§‹ */
          background-position: 0 0;
          /* è®¾ç½®å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦ï¼Œæ ¹æ®ä½ è¦æ˜¾ç¤ºçš„å›¾åƒéƒ¨åˆ†è°ƒæ•´ */
          width: 100%;
          height: 100%;
      }

      .coupon-sprite {
          background-position: 235px 200px;
          /* æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´åç§»é‡ */
      }

      /* ä¼˜æƒ åˆ¸æ ‡ç­¾ */
      .coupon-tag {
          position: absolute;
          bottom: 0;
          left: 0;
          background: linear-gradient(to right, #ec4899, #ef4444);
          color: white;
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          font-weight: bold;
      }

      /* ä¸»è¦å†…å®¹ */
      .content {
          text-align: center;
      }

      .discount-text {
          font-size: 2rem;
          font-weight: 800;
          color: #1f2937;
          margin: 1rem 0;
      }

      /* å€’è®¡æ—¶ */
      .countdown {
          background: #f3f4f6;
          padding: 0.5rem 1rem;
          border-radius: 8px;
          display: inline-block;
          margin: 1rem 0;
      }

      /* é¢†å–æŒ‰é’® */
      .claim-btn {
          width: 100%;
          background: linear-gradient(to right, #ec4899, #ef4444);
          color: white;
          padding: 1rem;
          border: none;
          border-radius: 12px;
          font-size: 1.125rem;
          font-weight: bold;
          cursor: pointer;
          margin-top: 1.5rem;
          transition: transform 0.2s, box-shadow 0.2s;
      }

      .claim-btn:hover {
          transform: scale(1.02);
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>

  <body>
    <!-- å¼¹çª—ç»“æ„ -->
    <div class="popup-background" id="popup">
      <div class="popup-card">
        <button class="close-btn" onclick="closePopup()">Ã—</button>
        <div class="coupon-image">
          <!-- ä¿®æ”¹ä¸ºä¸€ä¸ªç©ºçš„divï¼Œç”¨äºæ˜¾ç¤ºç²¾çµå›¾çš„éƒ¨åˆ† -->
          <div class="coupon-sprite"></div>
          <div class="coupon-tag">LIMITED OFFER</div>
        </div>
        <div class="content">
          <h3 class="discount-text">7æŠ˜ä¼˜æƒ åˆ¸</h3>
          <p>é™æ—¶ä¸“äº«ä¼˜æƒ ï¼Œç«‹å³é¢†å–ï¼</p>
          <div class="countdown">å‰©ä½™æ—¶é—´: <span id="countdown">23:59:59</span></div>
          <p>ğŸ›’ æ»¡100å…ƒå¯ç”¨</p>
          <p>ğŸ“… æœ‰æ•ˆæœŸè‡³12/31</p>
          <button class="claim-btn" onclick="claimCoupon()">ğŸ‰ ç«‹å³é¢†å–ï¼ˆå‰©ä½™5å¼ ï¼‰</button>
        </div>
      </div>
    </div>

    <script>
        // ç¡®ä¿DOMåŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function () {
            const popup = document.getElementById('popup');
            let hasTriggered = false;

            // å€’è®¡æ—¶åŠŸèƒ½
            let remainingTime = 24 * 60 * 60;
            function updateCountdown() {
                const hours = Math.floor(remainingTime / 3600);
                const minutes = Math.floor((remainingTime % 3600) / 60);
                const seconds = remainingTime % 60;
                document.getElementById('countdown').textContent =
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

                if (remainingTime > 0) remainingTime--;
            }
            setInterval(updateCountdown, 1000);

            // æ˜¾ç¤ºå¼¹çª—é€»è¾‘
            function checkTrigger(e) {
                if (hasTriggered) return;
                if (e.clientY <= 20) showPopup();
            }

            // æš´éœ²å…¨å±€æ–¹æ³•
            window.showPopup = function () {
                popup.style.display = 'flex';
                hasTriggered = true;
            }

            window.closePopup = function () {
                popup.style.display = 'none';
            }

            window.claimCoupon = function () {
                alert('ä¼˜æƒ åˆ¸å·²é¢†å–ï¼');
                closePopup();
            }

            // äº‹ä»¶ç›‘å¬
            document.addEventListener('mouseleave', checkTrigger);

            // åˆå§‹åŒ–æ¼”ç¤ºï¼ˆæ­£å¼ä½¿ç”¨åº”ç§»é™¤ï¼‰
            setTimeout(showPopup, 1000);
        });
    </script>

    {{ content_for_layout }}
  </body>
</html>
